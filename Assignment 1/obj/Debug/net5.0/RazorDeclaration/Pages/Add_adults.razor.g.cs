// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace Assignment_1.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\simon\RiderProjects\Assignment 1\Assignment 1\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\simon\RiderProjects\Assignment 1\Assignment 1\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\simon\RiderProjects\Assignment 1\Assignment 1\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\simon\RiderProjects\Assignment 1\Assignment 1\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\simon\RiderProjects\Assignment 1\Assignment 1\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\simon\RiderProjects\Assignment 1\Assignment 1\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\simon\RiderProjects\Assignment 1\Assignment 1\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\simon\RiderProjects\Assignment 1\Assignment 1\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\simon\RiderProjects\Assignment 1\Assignment 1\_Imports.razor"
using Assignment_1;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\simon\RiderProjects\Assignment 1\Assignment 1\_Imports.razor"
using Assignment_1.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\simon\RiderProjects\Assignment 1\Assignment 1\Pages\Add_adults.razor"
using Microsoft.AspNetCore.Mvc.ModelBinding.Binders;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\simon\RiderProjects\Assignment 1\Assignment 1\Pages\Add_adults.razor"
using Microsoft.Extensions.DependencyInjection;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\simon\RiderProjects\Assignment 1\Assignment 1\Pages\Add_adults.razor"
using Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\simon\RiderProjects\Assignment 1\Assignment 1\Pages\Add_adults.razor"
using Assigntment_2_Web_API;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/Add_adults")]
    public partial class Add_adults : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#nullable restore
#line 70 "C:\Users\simon\RiderProjects\Assignment 1\Assignment 1\Pages\Add_adults.razor"
       
    private string firstName = "";
    private string lastName = "";
    private string jobTitle = "";
    private string sexChoice = "Male";
    private int age = 0;
    private int height = 0;
    private int weight = 0;
    private int salary = 0;
    private string eyeColor = "";
    private string hairColor = "";

    private string errorMessage = "";
    private string successMessage = "";
    
    protected override async Task OnInitializedAsync()
    {
        Start();
    }
    
    public void Start()
    {
        if (TheUser.userName == null)
        {
            Console.WriteLine("User is null! Navigating to login...");

            NavigationManager.NavigateTo("/login");
        }
    }

    public async void AddAdult()
    {
        successMessage = "";
        if (AllFilled())
        {
            IList<Adult> adults = await AdultsService.GetAdultsAsync();
            Adult newAdult = new Adult();
            newAdult.jobTitle = new Job();

            newAdult.id = adults.Count;
            newAdult.age = age;
            newAdult.jobTitle.jobTitle = jobTitle;
            newAdult.jobTitle.salary = salary;
            newAdult.height = height;
            newAdult.sex = sexChoice.Substring(0, 1); // We get the first character, so M or F
            newAdult.weight = weight;
            newAdult.eyeColor = eyeColor;
            newAdult.firstName = firstName;
            newAdult.hairColor = hairColor;
            newAdult.lastName = lastName;
            await AdultsService.AddAdultAsync(newAdult);
            Console.WriteLine("New adult added!");
            successMessage = "Successfully added new adult!";
            ClearAll();
        }
        StateHasChanged();
    }

    public bool AllFilled()
    {
        int empties = 0;
        errorMessage = "";

        if (firstName.Equals("") || firstName == null)
        {
            empties++;
        }
        if (lastName.Equals("") || lastName == null)
        {
            empties++;
        }
        if (jobTitle.Equals("") || jobTitle == null)
        {
            empties++;
        }
        if (sexChoice.Equals("") || sexChoice == null)
        {
            empties++;
        }
        if (age < 1 || age > 120)
        {
            empties++;
        }
        if (height < 1 || height > 300)
        {
            empties++;
        }
        if (weight < 1 || weight > 300)
        {
            empties++;
        }
        if (salary < -1)
        {
            empties++;
        }
        if (eyeColor.Equals("") || eyeColor == null)
        {
            empties++;
        }
        if (hairColor.Equals("") || hairColor == null)
        {
            empties++;
        }
        if (empties != 0)
        {
            errorMessage = "Please fill out all the fields with proper values!";
        }
        return (empties == 0);
    }

    public void ClearAll()
    {
    firstName = "";
    lastName = "";
    jobTitle = "";
    sexChoice = "Male";
    age = 0;
    height = 0;
    weight = 0;
    salary = 0;
    eyeColor = "";
    hairColor = "";
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IAdultsService AdultsService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager NavigationManager { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private User TheUser { get; set; }
    }
}
#pragma warning restore 1591
